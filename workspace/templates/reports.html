{% extends "base_dashboard.html" %}
{% block title %}Reports ‚Äì ProductForge{% endblock %}
{% block content %}
  <div class="max-w-5xl mx-auto py-6 px-0">
    <h1 class="text-3xl font-bold mb-6 text-indigo-400">üìë Generated Reports</h1>
    <p class="text-gray-400 mb-8">Listing recent weekly reports generated by the analytics subsystem.</p>
    <div id="reportsList" class="space-y-2 text-sm"></div>
    <div class="mt-8">
      <a href="/dashboard" class="text-indigo-400 hover:text-indigo-300">‚Üê Back to Dashboard</a>
    </div>
  </div>
{% endblock %}
{% block body_scripts %}
  <script>
    async function loadReports() {
      const res = await fetch('/reports');
      const data = await res.json();
      const html = data.reports.map(r => `
        <div class='p-3 bg-gray-800 rounded border border-indigo-600 flex justify-between items-center'>
          <div>
            <p class='font-mono text-xs'>${r.filename}</p>
            <p class='text-xs text-gray-400'>Size: ${r.size} bytes ‚Ä¢ Modified: ${r.modified}</p>
          </div>
          <a class='text-indigo-400 text-xs underline' href='/workspace/reports/${r.filename}' download>Download</a>
        </div>
      `).join('');
      document.getElementById('reportsList').innerHTML = html || '<p>No reports yet.</p>';
    }
    loadReports();
  </script>
{% endblock %}
